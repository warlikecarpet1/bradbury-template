<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ray Bradbury Challenge – Import</title>
  <style>
    body{font-family:system-ui;background:#111;color:#eee;text-align:center;padding:80px}
    input,button{padding:14px;font-size:18px;margin:10px}
    button{background:#0066ff;color:white;border:none;cursor:pointer}
  </style>
</head>
<body>
  <h1>The Ray Bradbury Challenge</h1>
  <p>Paste your Notion integration token → click Import</p>
  <input type="text" id="token" placeholder="secret_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" style="width:580px"><br>
  <button onclick="importTemplate()">Import Template Now</button>

  <script>
  async function importTemplate() {
    const token = document.getElementById('token').value.trim();
    if (!token) return alert('Paste your token');

    try {
      // Load JSON from your repo
      const jsonRes = await fetch('https://raw.githubusercontent.com/YOUR_GITHUB_USERNAME/bradbury-template/main/template.json');
      let page = await jsonRes.json();

      // This line drops the page straight into your workspace root
      page.parent = { "workspace_id": true };

      // CORS proxy (free, reliable, no signup)
      const apiRes = await fetch('https://corsproxy.io/?' + encodeURIComponent('https://api.notion.com/v1/pages'), {
        method: 'POST',
        headers: {
          'Authorization': 'Bearer ' + token,
          'Content-Type': 'application/json',
          'Notion-Version': '2022-06-28'
        },
        body: JSON.stringify(page)
      });

      const data = await apiRes.json();

      if (apiRes.ok) {
        window.open(data.url, '_blank');
        alert('SUCCESS! Template is in your Notion workspace');
      } else {
        alert('Error: ' + data.message);
      }
    } catch (e) {
      alert('Something broke – open console (F12) and send me the error');
      console.error(e);
    }
  }
  </script>
</body>
</html>
